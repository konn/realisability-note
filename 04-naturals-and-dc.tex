%#!luajitlatex -src-specials 04-naturals-and-dc.tex

\documentclass[realisability.tex]{subfiles}
\begin{document}
\section{$V^{\mathcal{R}}$における自然数と従属選択公理}
本節では，$V^{\mathcal{R}}$における自然数の性質と，従属選択公理が成り立つ十分条件について基本的な考察を行う．

\subsection{外延性と関数・関係に関する注意}
自然数と従属選択公理について論じる前に，$\ZFe$-関数と$\ZF$-関数の間の相互関係について細かく分析しておく．

\begin{definition}
 $\ZFe$において集合$X$が\emph{外延的}$\defs \forall x, y \strin X \: [x \simeq y \to x = y]$.
\end{definition}

定義より明らかに次が成り立つ：

\begin{lemma}
 $X$が外延的で$Y \subseteq X$なら$Y$も外延的．
\end{lemma}
\begin{lemma}
 $X, Y$が外延的なら$X \times Y$も外延的．
\end{lemma}
\begin{proof}
 $(x, y), (x', y') \strin X \times Y$かつ$(x, y) \simeq (x', y')$とすると，順序対の定義は$\ZF$部分でも$\ZFe$部分でも同じように出来るので$x \simeq x'$かつ$y \simeq y'$.
 すると$X, Y$の外延性より$x = x', y = y'$を得，結局$(x, y) = (x', y')$を得る． \qed
\end{proof}

定義域・値域の外延性は，$\ZF_\epsilon$-関数と$\ZF$-関数の互換性に関して重要な十分条件を与える：
\begin{lemma}
 \begin{enumerate}
  \item $X$が外延的で$f: X \strto Y$なら$f: X \extto Y$.
  \item $Y$が外延的で$f: X \extto Y$なら$f \simeq f' \defeq \Set{(x, y) \strin X \times Y | (x, y) \in f}$.
  \item $X, Y$が共に外延的なら，$f: X \strto Y \iff f: X \extto Y$. 単射全射の概念も一致する．
 \end{enumerate}
\end{lemma}

外延的写像が与えられれば，それを用いて引き戻し・押し出しを考えることが出来る．
通常の$\ZF$における議論と同様にして次が成り立つ：
\begin{lemma}
 $f: A \extto B$について，$f_*: \Pow(A) \to \Pow(B)$および$f^*: \Pow(B) \to \Pow(A)$をそれぞれ$f_*(X) \defeq \Set{ f(x) | x \in X }$および$f^*(Y) \defeq \Set{x \strin X | f(x) \in Y}$で定める．
 \begin{enumerate}
  \item $f_*, f^*$は共に外延的関数，
  \item $f$が外延的単射なら$f_*$も外延的単射，
  \item $f$が外延的全単射なら$f^*, f_*$は互いに$\ZF$-逆写像であり，従って$\ZF$-全単射．
 \end{enumerate}
\end{lemma}

これらは個別の写像が$\ZF$と両立するか否かという問題を扱っているが，個別のモデルにおける議論では，良い写像を介して$\ZFe$側の現象を$\ZF$側にも伝播させる形で種々の独立性を証明する．
そのために必要なのが次の概念である：

\begin{definition}
 $A, B$を集合，$f: A \strto B$とする．
 $x \neq y$なら$f(x) \not\simeq f(y)$となるとき，$f$は$A$を$B$に\emph{外延的に埋め込む}と言う．
 このとき$f: A \eembto B$，あるいは$f$を略して$A \eembto B$と書く．
\end{definition}

\begin{remark}
 $a \not\simeq b \implies a \neq b$なので$f: A \eembto B$の時$f$は$\ZFe$の意味で単射となっている．
 しかし，$a \simeq b$なら$f(a) \simeq f(b)$となるかは定かではないので，外延的埋め込みが$\ZF$-写像であるとは限らず，特に$\ZF$-単射になっているわけではない．
 なのであまり良い用語法ではないが，言葉にない事には仕方がないので当座そう呼ぶことにする．
\end{remark}

明らかに$\ZF$-単射と外延的埋め込みの合成は外延的埋め込みになる：

\begin{lemma}\label{lem:compos-ext-emb}
 $A \xrightarrow[\mathrm{str}, \text{1-1}]{f} C \mathrel{\smash{\xhookrightarrow[\hphantom{\mathrm{str}, \text{1-1}}]{g}}_{\mathrm{e}}} D \xrightarrow[\text{1-1}, \mathrm{ext}]{h} B$なら$h \circ g \circ f: A \eembto B$.
\end{lemma}
外延的埋め込みがあると，単射と全射を互いに融通しあうことが出来る：
\begin{lemma}
 下図のような$\ZF$-全射$f$,外延的埋め込み$i, j$が与えられたとする：
 \begin{center}
  \begin{tikzpicture}
   \matrix[matrix of math nodes, column sep=1cm, row sep=1cm]{
    |(A)|  A   & |(B)|  B \\
    |(A0)| A_0 & |(B0)| B_0\\
   };
   \path[draw, ->>]
     (A) edge node[above] {$\scriptstyle f$}
              node[below] {\scriptsize ext} (B);
   \path[draw,right hook->>]
     (A0) edge node[auto] {$\scriptstyle i$}
               node[right, pos=.9] {$\scriptstyle \mathrm{e}$}
     (A);
   \path[draw,left hook->]
     (B0) edge node[auto,swap] {$\scriptstyle j$}
               node[left, pos=.9] {$\scriptstyle \mathrm{e}$}
     (B);
   \path[draw, densely dotted, ->>]
     (A0) edge node[auto]{\scriptsize str} node[auto,swap] {$\scriptstyle \exists \bar{f}$} (B0);
  \end{tikzpicture}
 \end{center}
 但し$i$の全射性は$\ZFe$の意味とする．
 このとき上図を可換とする$\ZFe$-全射$\bar{f}: A_0 \xrightarrow[\mathrm{str}]{\mathrm{onto}} B_0$が存在する．
\end{lemma}
\begin{proof}
 $b_0 \in B_0$を一つ固定し，$\bar{f}$は次で定める：
 \[
  \bar{f}(a) =
  \begin{cases}
   b   & \text{if } f(i(a)) \simeq j(b) \text{ for some } b \in B_0,\\
   b_0 & \ow.
  \end{cases}
 \]
 $j(b') \simeq f(i(a)) \simeq j(b)$なら$j$が外延的埋め込みであることから$b' = b$となるので，この$\bar{f}$はwell-definedであり，特に$A_0$の全域で定義されている．

 あとは全射を見ればよい．
 ここで$b \in B_0$を任意にとれば，$f$の$\ZF$-全射性より$f(a') \simeq j(b)$となる$a' \in A$が取れる．
 すると$i$は$\ZFe$-全射なので$i(a) = a'$となる$a \in A_0$が取れる．
 よって$f(i(a)) = f(a') \simeq j(b)$を得る． \qed
\end{proof}
これの双対も成立する：
\begin{lemma}
 下図のような$\ZFe$-単射$f$,外延的埋め込み$i, j$が与えられたとする：
 \begin{center}
  \begin{tikzpicture}
   \matrix[matrix of math nodes, column sep=1cm, row sep=1cm]{
    |(A)|  A   & |(B)|  B \\
    |(A0)| A_0 & |(B0)| B_0\\
   };
   \path[draw,densely dotted, >->]
     (A) edge node[above] {$\scriptstyle \exists \bar{f}$}
              node[below] {\scriptsize ext} (B);
   \path[draw,right hook->>]
     (A0) edge node[auto] {$\scriptstyle i$}
               node[right, pos=.9] {$\scriptstyle \mathrm{e}$}
     (A);
   \path[draw,left hook->]
     (B0) edge node[auto,swap] {$\scriptstyle j$}
               node[left, pos=.9] {$\scriptstyle \mathrm{e}$}
     (B);
   \path[draw, >->]
     (A0) edge node[auto]{\scriptsize ext} node[auto,swap] {$\scriptstyle f$} (B0);
  \end{tikzpicture}
 \end{center}
 このとき上図を可換とする$\ZF$-単射$\bar{f}: A \xrightarrow[\mathrm{ext}]{\text{1-1}} B$が存在する．
\end{lemma}
\begin{proof}
 $i$が$\ZFe$-全単射なので，$\bar{f}(a) \defeq j(f(i^{-1}(a)))$により$\bar{f}$を定めよう．
 ここで$j(f(i^{-1}(a_0))) \simeq j(f(i^{-1}(a_1)))$なら$j$が外延的埋め込みであることから$f(i^{-1}(a_0)) = f(i^{-1}(a_1))$となり，$f$の$\ZFe$-単射性より$i^{-1}(a_0) = i^{-1}(a_1)$を得る．
 すると今度は$i$が外延的埋め込みであることから$a_0 = i(i^{-1}(a_0)) \simeq i(i^{-1}(a_1)) = a_1$となる．
 よって$\bar{f}$は可換である． \qed
\end{proof}

\begin{lemma}
 下図のような$\ZFe$-全射$f$,外延的埋め込み$i, j$が与えられたとする：
 \begin{center}
  \begin{tikzpicture}
   \matrix[matrix of math nodes, column sep=1cm, row sep=1cm]{
    |(A)|  A   & |(B)|  B \\
    |(A0)| A_0 & |(B0)| B_0\\
   };
   \path[draw, densely dotted, ->>]
     (A) edge node[above] {$\scriptstyle \exists \bar{f}$}
              node[below] {\scriptsize ext} (B);
   \path[draw,right hook->>]
     (A0) edge node[auto] {$\scriptstyle i$}
               node[right, pos=.9] {$\scriptstyle \mathrm{e}$}
     (A);
   \path[draw,left hook->>]
     (B0) edge node[auto,swap] {$\scriptstyle j$}
               node[left, pos=.9] {$\scriptstyle \mathrm{e}$}
     (B);
   \path[draw, ->>]
     (A0) edge node[auto]{\scriptsize str} node[auto,swap] {$\scriptstyle f$} (B0);
  \end{tikzpicture}
 \end{center}
 但し$i, j$の全射性は$\ZFe$の意味とする．
 このとき上図を可換とする$\ZF$-全射$\bar{f}: A \xrightarrow[\mathrm{ext}]{\mathrm{onto}} B$が存在する．
\end{lemma}
\begin{proof}
 $\bar{f} = j \circ f \circ i^{-1}$. \qed
\end{proof}

\begin{lemma}
 下図のような$\ZF$-単射$f$,外延的埋め込み$i, j$が与えられたとする：
 \begin{center}
  \begin{tikzpicture}
   \matrix[matrix of math nodes, column sep=1cm, row sep=1cm]{
    |(A)|  A   & |(B)|  B \\
    |(A0)| A_0 & |(B0)| B_0\\
   };
   \path[draw, >->]
     (A) edge node[above] {$\scriptstyle f$}
              node[below] {\scriptsize ext} (B);
   \path[draw,right hook->]
     (A0) edge node[auto] {$\scriptstyle i$}
               node[right, pos=.9] {$\scriptstyle \mathrm{e}$}
     (A);
   \path[draw,left hook->>]
     (B0) edge node[auto,swap] {$\scriptstyle j$}
               node[left, pos=.9] {$\scriptstyle \mathrm{e}$}
     (B);
   \path[draw, densely dotted, >->]
     (A0) edge node[auto]{\scriptsize str} node[auto,swap] {$\scriptstyle \exists \bar{f}$} (B0);
  \end{tikzpicture}
 \end{center}
 但し$i$の全射性は$\ZFe$の意味とする．
 このとき上図を可換とする$\ZFe$-単射$\bar{f}: A_0 \xrightarrow[\mathrm{str}]{\mathrm{onto}} B_0$が存在する．
\end{lemma}
\begin{proof}
 $\bar{f} = j^{-1} \circ f \circ i$. \qed
\end{proof}

\begin{corollary}\label{cor:ext-emb-morphs}
 $A_0 \mathrel{\tikz{\path[draw,right hook->>] (0,0) to (1em,0)}}_e A$, $B_0 \mathrel{\tikz{\path[draw,right hook->>](0,0) to (1em,0)}}_e B$なら$A$と$B$の間の単射・全射・全単射と$A_0$と$B_0$の間のそれらの存在は同値になる．
\end{corollary}


\subsection{実現可能性モデルにおける自然数の表現}
実現可能性モデルでは，扱い易いようvon Neumann順序数とは異なる自然数のコードを採用する：

\begin{definition}
 写像$s$を$s(\dot{x}) \defeq \Set{ (\dot{x}, \pi) | \pi \in \Pi}$により定める．
 $0 \defeq \emptyset = \hat{\emptyset}$とし，自然数$n$と$s^n 0$を同一視して，基礎モデルで$\mathbb{N} \defeq \Set{ s^n 0 | n < \omega}$と置く．

 この時，集合$\NN$を次で定める：
 \[
  \NN \defeq \Set{ (s^n 0, \num{n} \push \pi) | n < \omega, \pi \in \Pi}.
 \]
 ただし，ここで$\underline{n}$はChurch数項：$\underline{0} \defeq \abs{f z}{z}, \quad \underline{n+1} \defeq \sigma \, \underline{n}, \quad \sigma \defeq \abs{n f z}{n f (f z)}$.
 この時$\underline{n} \cons \xi \push \pi \reds \xi^n \eta \cons \pi$となる．
\end{definition}
\begin{remark}
 $\|\hat{a} \strnin s(\hat{b})\| = \|\hat{b} \neq \hat{a}\|$かつ$\|a \strin s(b)\| = \|a = b\|$.
 とくに$\|\hat{x} \strnin s(\hat{x})\| = \Pi$であり，等号公理から$V^{\mathcal{R}} \models \forall a, x, y \strin \hat{V} \: [x \strin s(a) \to y \strin s(a) \to x = y]$.
\end{remark}

この集合が$V^{\mathcal{R}}$で見ると$\in$の意味でも$\strin$の意味でも自然数全体となっていることを以下では見ていく．
特に，$\NN$が$0$を含み$s$で閉じた最小の集合である事を示せば良く，つまり数学的帰納法の図式が$\NN$について実現されている事を見ればよいことになる．

その前にまず，こうして導入した$s, 0$が外延的同値性$\simeq$と両立することを確かめる：

\begin{lemma}\label{lem:s-0-compat}
 \begin{enumerate}
  \item \label{item:sx-strong-inj}$\comb{I} \Vdash \forall x, y \: (s(x) = s(y) \hookrightarrow x = y)$,
  \item \label{item:sa-strong-distinct}$\abs{x}{x\comb{I}} \Vdash \forall x \: (s(x) \not\simeq 0)$,
  \item \label{item:s-compat-ext}$V^{\mathcal{R}} \models \forall x\: \forall y \: [x \simeq y \leftrightarrow s(x) \simeq s(y)]$,
  \item \label{item:N-weak-close-s} $\abs{g x}{g(\sigma x)} \Vdash \forall y \: (s(y) \strnin \NN \to y \strnin \NN) $,
  \item \label{item:N-strong-close-s}$V^{\mathcal{R}} \models \forall x \: (s(x) \notin \NN \to x \notin \NN)$.
  \item \label{item:nat-ext-to-int}$V^{\mathcal{R}} \models \forall n, m \strin \NN\:[n \simeq m \to n = m]$.
 \end{enumerate}
\end{lemma}
\begin{proof}
 \ref{item:sx-strong-inj}は明らか．
 \ref{item:sa-strong-distinct}を示す．
 特に$\abs{x}{x \I} \Vdash s(x) \nsubseteq \emptyset$を示そう．
 略さずに書けば，
 \[
  \abs{x}{x \I} \Vdash (\forall z \: (z \notin \emptyset \to z \strnin s(x))) \to \bot
 \]
 を示せばよい．
 つまり，$\eta \Vdash \forall z \: (z \notin \emptyset \to z \strnin s(x))$と$\pi \in \Pi$に対して$\abs{x}{x \I} \cons \eta \push \pi \reds \eta \I \cons \pi \in \Pi$を示せれば良い．
 しかるに，$\|z \notin \emptyset\| = \|\forall w\: (w \simeq z \to w \strnin 0)\| = \emptyset$であり，
 $\|z \strnin s(x)\| = \| z \neq x \|$なので，任意の$z \in V$に対して$\eta \Vdash (\forall z \: (z \notin \emptyset \to z \strnin s(x))) \iff \eta \Vdash \top \to z \neq x$となる．
 特に$z = x$に取れば，$\eta \Vdash \top \to \bot$を得，$\comb{I} \Vdash \top$より$\eta \I \cons \pi \in \pole$を得る．

 \ref{item:s-compat-ext}について：演繹について閉じているので，$V^{\mathcal{R}}$の中で議論する．
 任意の$a, b$について：
 \[ s(a) \subseteq s(b)
 \iff \forall x\: (x \notin s(b) \to x \strnin s(a))
 \iff \forall x\: (x \notin s(b) \to x \neq a)
 \iff a \in s(b).
 \]
 いま，$a \simeq b$なら$a \simeq b \strin s(b)$より${\in}$の公理から$a \in s(b)$が得られる．
 また，逆に$a \in s(b)$なら$z \strin s(b)$で$a \simeq z$となるものが取れるが，上の注意より$s(b)$は$V^{\mathcal{R}}$において$b$のみしか元を持たないので$a \simeq b$.

 \ref{item:N-weak-close-s}：やるだけ．

 最後に~\ref{item:N-strong-close-s}について：次の同値変形から明らか：
 \[
       x \in \NN
 \iff \exists y \strin \NN \: y \simeq x
 \iff \exists y \strin \NN \: (s(x) \simeq s(y))
 \implies s(x) \in \NN.
 \]
\end{proof}

$\NN$に関する量化子の虚偽値の計算を簡単にするため，次の記号を導入する：
\[
 \|\forall x \strin \NN\: \varphi[x]\| \defeq \Set{ \underline{n} \push \pi | {\pi \in \|\varphi[s^n 0]\|}}.
\]
これが期待通りの振る舞いをすることはルーチンワークで示せる：
\begin{lemma}
 \begin{enumerate}
  \item $\abs{xyz}{y(xz)} \Vdash \forall x \strin \NN \: \varphi[x] \to \forall x \:(\neg \varphi[x] \to x \strnin \NN)$,
  \item $\abs{xy}{\cc \,(\abs{\conti}{x \conti y})} \Vdash \forall x \:(\neg \varphi[x] \to x \strnin \NN) \to \forall x \strin \NN \: \varphi[x]$.
 \end{enumerate}
\end{lemma}
\begin{proof}
 \begin{enumerate}
  \item $\xi \Vdash \forall x \strin \NN\: \varphi[x]$, $x \in V$, $\eta \Vdash \neg \varphi[x]$, $\pi_0 \in \|x \strnin \NN\|$とする．
        この時，$\NN$の定義より$n < \omega$と$\pi \in \Pi$で$x = s^n 0$かつ$\pi_0 = \underline{n} \push \pi$となるものが取れる．
        示すべきことは，$\KVM{{\abs{xyz}{y(xz)}}{\xi}{\eta}{\num{n}}{\pi}} \in \pole$である．
        このとき$\KVM{{\abs{xyz}{y(xz)}}{\xi}{\eta}{\num{n}}{\pi}} \reds \KVM{{\eta(\xi \num{n})}{\pi}} \redsto \KVM{{\eta}{{\xi \num{n}}}{\pi}}$であり$\eta \Vdash \varphi[s^n 0] \to \bot$なので，あとは$\xi \num{n} \Vdash \varphi[s^n 0]$が示せれば良い．
        しかるに$\varpi \in \|\varphi[s^n 0]\|$を取れば，
        $\KVM{{\xi \num{n}} \pi} \redsto \KVM{\xi {{\num{n}}} \varpi}$となり，定義より$\num{n} \push \varpi \in \|\forall x \strin \NN\: \phi[x]\|$なので$\KVM{\xi{{\num{n}}} \varpi} \in \pole$を得る．
  \item 同様． \qed
 \end{enumerate}
\end{proof}

それでは，次に掲げる$\NN$の帰納法図式を示していく．
\begin{theorem} \label{thm:ZFe-ind-nat}
 任意の$\ZF_{\varepsilon}$-論理式$\varphi[z, \vec{x}]$に対し，次が成立：
 \[
  \I \Vdash \forall \vec{x}\: \forall n \strin \NN \:(\forall y\: (\varphi[\vec{x}, y] \to \varphi[\vec{x}, s(y)]) \to \varphi[\vec{x}, 0] \to \varphi[\vec{x}, n]).
 \]
\end{theorem}
これが示せれば，$\ZF$-論理式と$\simeq$が両立する事から$\ZF$における帰納法図式も成立する：
\begin{corollary}\label{cor:ZF-ind-nat}
 任意の$\ZF$-論理式$\varphi[z, \vec{x}]$に対し，次が成立：
 \[
  V^{\mathcal{R}} \models \forall \vec{x}\: \forall n \in \NN \:(\forall y\: (\varphi[\vec{x}, y] \to \varphi[\vec{x}, s(y)]) \to \varphi[\vec{x}, 0] \to \varphi[\vec{x}, n]).
 \]
 特に$V^{\mathcal{R}}$を$\ZF$のモデルとみたとき，$\NN$は自然数全体の集合と同型．
\end{corollary}
\begin{proof}
 上の定理~\ref{thm:ZFe-ind-nat}および，$\ZF$-論理式が$\simeq$と両立するという補題\ref{lem:ZF-conservative-lem}の\ref{item:ZF-fml-cong}より直ちに従う. \qed
\end{proof}
あとは上の定理\ref{thm:ZFe-ind-nat}を示せばよい．
それには次の補題を使う：
\begin{lemma}\label{lem:ZFe-ind-nat-aux}
 $n, k < \omega$とし，$\xi \Vdash \forall y\: (\varphi(y) \to \varphi(s y))$, $\eta \Vdash \varphi(s^k 0)$および$\pi \in \|\varphi(s^k n)\|$とする．
 このとき$\KVM{{{\num n}} \xi \eta \pi} \in \pole$.
\end{lemma}
\begin{proof}
 $n$に関する帰納法で示す．

 $n = 0$の時は$\pi \in \|\varphi(s^k 0)\|$となるので，
 \[
  \KVM{{{\num 0}} \xi \eta \pi} \redsto \KVM{\eta \pi} \in \pole
 \]
 となるからOK.

 $n$で成立するとして$n + 1$の場合を考えると，
 \[
  \KVM{{{\num{n+1}}} \xi \eta \pi} \equiv
  \KVM{{\sigma \num{n}} \xi \eta \pi} \redsto
  \KVM{{{\num{n}}} \xi {(\xi \eta)} \pi}
 \]
 このとき$(\xi\eta) \Vdash \varphi(s^{k+1} 0)$であり，$\pi \in \|\varphi(s^k(s n))\| = \|\varphi(s^{k+1} n)\|$となるから，帰納法の仮定より$\KVM{{{\num{n}}} \xi {(\xi \eta)} \pi} \in \pole$を得る． \qed
\end{proof}

\begin{proof}[Proof of Theorem \ref{thm:ZFe-ind-nat}]
 簡単のため以下$\vec{x}$は省略する．
 $\varphi(n)$を$\ZF_{\varepsilon}$の論理式として次を示す：
  \[
  \I \Vdash \forall \vec{x}\: \forall n \strin \NN \:(\forall x\: (\varphi(x) \to \varphi(sx)) \to \varphi(0) \to \varphi(n)).
 \]
 そこで$n < \omega$と$\xi \Vdash \forall x \: \varphi(x) \to \varphi(s x)$，$\eta \Vdash \varphi(0)$および$\pi \in \|\varphi(s^n 0)\|$を固定し，次を示せばよい：
 \[
  \KVM{{\I}{{\num{n}}} \xi\eta {\pi}} \redsto
  \KVM{{{\num{n}}} \xi \eta \pi} \in \pole.
 \]
 しかし，これは補題\ref{lem:ZFe-ind-nat-aux}で$k = 0$と置けば得られることである． \qed
\end{proof}

また，$\NN$が外延的同値性と相性が良いことから，$\NN$上帰納的に定義された関数は$\ZF$のモデルの中でもちゃんと関数として振る舞うことがわかる：

\begin{lemma}\label{lem:nat-func-strong}
 $\ZF_{\varepsilon}$のモデルにおいて，自然数上定義された関数は外延的にも関数となる：
 \[
 \ZFe \vdash \forall x \: \forall f : \N \to V^{\mathcal{R}}\:
 \forall n, m \in \N \: [n \simeq m \to f(n) = f(m)].
 \]
\end{lemma}
\begin{proof}
 帰納法図式を満たす集合と$\Set{ \emptyset, \set{\emptyset}, \set{\set{\emptyset}}, \dots}$の間には同型写像が存在し，後者の集合はこれまで見たように外延的なので． \qed
\end{proof}

また，今回はそんなに使わないが，部分再帰関数はちゃんと$\NN$上に拡張されて定義される：
\begin{lemma}\label{lem:recursives-defined}
 \begin{enumerate}
  \item $F: \N^k \to \N$が部分再帰関数なら$V^{\R} \models F: \NN^k \to \NN$,
  \item $F: \N^k \to 2$が部分再帰関数なら$V^{\mathcal{R}} \models F: \NN^k \to \set{0, 1}$.
 \end{enumerate}
\end{lemma}

特に，通常の$\N$上の整列順序がそのまま$\NN$上に持ち上がることを見ておこう：

\begin{lemma}[$\NN$における自然な順序]\label{lem:nat-ord-in-NN}
 ${<}$を$V$における$\N$上の自然な順序とする．
 この時$V^{\mathcal{R}}$において$x <^{\mathcal{R}} y \defs \braket{x < y} = \mathds{1}$で定義される二項関係$<^{\mathcal{R}}$は$V^{\mathcal{R}}$で整列順序となり，特に$V^{\mathcal{R}}$における$\NN$上の自然な順序に一致する.
\end{lemma}
\begin{proof}
 推移律や非反射律は明らかに$\I$が実現している．
 また，$<$は整列順序であるので，整礎関係の絶対性\ref{lem:wf-pres}より$<^\mathcal{R}$も整礎である．

 自然数の順序のグラフは再帰的なので，上の補題から，$V^{\mathcal{R}} \models \forall x\: \forall y\: \braket{x < y} = 0 \text{ or } 1$.
 そこで次の式が実現される事を確かめればよいが，これはルーチンワーク：
 \[
  \forall x, y, z \strin \NN\: [x = y + z \hookrightarrow \braket{x < y} \neq 1],\quad
  \forall x, y, z \strin \NN\: [y = x + z + 1 \hookrightarrow \braket{x < y} = 1].
 \]
\end{proof}

\subsection{従属選択公理および非外延的選択公理}
濃度に関する条件を課せば，実現可能性モデル内部では従属選択公理が実現されていることを見る．
\begin{definition}
 $\mathcal{R}$を実現可能性代数とする時，$|\mathcal{R}| = \left\lvert\Lambda \cup \Pi \cup \Lambda \cons \Pi\right\rvert$と表す．

 以下，適当な単射$\Lambda \times \Pi \ni (\xi, \pi) \mapsto \alpha_{\xi,\pi} \in |\mathcal{R}|$が固定されているものとする．
\end{definition}

\begin{lemma}\label{lem:weak-skolem-gen}
 $\mathcal{C}$を$\dom(\mathcal{C})$が整列可能なクラス，$\kappa \defeq |\mathcal{R}|$, $\varphi[\vec{x}, y]$を$\ZF_{\varepsilon}$の論理式とする．
 この時，次を満たす関数$f = f^{\mathcal{C}}_{\varphi}: V \times \kappa \to V$が定義可能：
 \begin{enumerate}
  \item \label{item:sk-hered}任意の$(a, \pi) \in \mathcal{C}$, $\vec{x} \in V$と$\xi \Vdash \varphi[\vec{x}, a]$に対し，$\alpha < \kappa$で$\xi \push \pi \in \|\varphi[\vec{x}, f(\vec{x}, \alpha)] \to f(\vec{x}, \alpha) \strnin \mathcal{C}\|$を満たすものが存在，
  \item $\I \Vdash \forall \vec{x} \: \forall y \:\left[ \forall \alpha \strin \hat{\kappa}\: (\varphi[\vec{x}, f(\vec{x}, \alpha)] \to f(\vec{x},\alpha) \strnin \mathcal{C}) \to \varphi[\vec{x}, y] \to y \strnin \mathcal{C} \right]$. 
 \end{enumerate}
 特に，集合を値域とする弱いSkolem関数が常に取れる：
 \[
 V^{\mathcal{R}} \models \forall X\: \forall Y \: \exists f: \finseq{X} \times \hat{\kappa} \strto Y\; \forall \vec{x} \in \finseq{X} \:\forall y \strin Y \: 
  \left[\varphi[\vec{x}, y] \to \exists \alpha \strin \hat{\kappa} \: \varphi[\vec{x}, f(\vec{x}, \alpha)]\right].
 \]
\end{lemma}
\begin{proof}
 \begin{enumerate}
  \item $\mathcal{C}$の整列順序${<_{\mathcal{C}}}$を一つ固定する．以下が求めるものとなる：
        \[
         f(\vec{x}, \alpha) \defeq
         \begin{cases}
          \min_{<_{\mathcal{C}}} \Set{c | \alpha = \alpha_{\xi, \pi}, \xi \Vdash \quoted{\varphi[\vec{x}, c]}, (c, \pi) \in \mathcal{C}} & (\text{if } \neq \emptyset)\\
          \min \dom(\mathcal{C}) & (\ow)
         \end{cases}
        \]
        実際，$(a, \pi) \in \mathcal{C}$かつ$\xi \Vdash \varphi[\vec{x}, a]$なら$\xi \Vdash \varphi[\vec{x}, f(\vec{x}, \alpha_{\xi,\pi})]$かつ$\pi \in \|f(\vec{x}, \alpha_{\xi,\pi}) \notin \mathcal{C}\|$となる．
  \item 示すべきことは，任意に$\vec{x} \in V, (y, \pi) \in \mathcal{C}, \xi \Vdash \forall \alpha \strin \hat{\kappa} \:(\varphi(\vec{x}, f(\vec{x}, \alpha)) \to f(\vec{x}, \alpha) \strnin \mathcal{C})$および$\eta \Vdash \varphi(\vec{x}, y)$を取って，
        \[
         \KVM{{\I}{\xi}{\eta}{\pi}} \redsto \KVM{{\xi}{\eta}{\pi}} \in \pole
        \]
        である．
        しかし前の\ref{item:sk-hered}より$\eta \push \pi \in \|\varphi(\vec{x}, f(\vec{x}, \alpha_{\xi,\pi})) \to f(\vec{x}, \alpha_{\xi,\pi}) \strnin \mathcal{C}\|$であり，$\forall$の解釈から$\xi \Vdash \varphi(\vec{x}, f(\vec{x}, \alpha_{\xi,\pi})) \to f(\vec{x}, \alpha_{\xi,\pi}) \strnin \mathcal{C}$なので良い． \qed
 \end{enumerate}
\end{proof}
また，$|\mathcal{R}| = \aleph_0$の時は，よりパラメータの範囲を厳しく制限出来ることが，同様の議論によってわかる：
\begin{lemma}\label{lem:weak-skolem-ctbl}
 $|\mathcal{R}| = \aleph_0$で$\mathcal{C}$を$\dom(\mathcal{C})$が整列可能なクラス，$\varphi[\vec{x}, y]$を$\ZF_{\varepsilon}$の論理式とする．
 この時，次を満たす関数$f = f^{\mathcal{C}}_{\varphi}: V \times \kappa \to V$が定義可能：
 \begin{enumerate}
  \item \label{item:sk-hered}任意の$(a, \pi) \in \mathcal{C}$, $\vec{x} \in V$と$\xi \Vdash \varphi[\vec{x}, a]$に対し，$n \in \mathbb{N}$で$\xi \push \pi \in \|\varphi[\vec{x}, f(\vec{x}, n)] \to f(\vec{x}, n) \strnin \mathcal{C}\|$を満たすものが存在，
  \item $\I \Vdash \forall \vec{x} \: \forall y \:\left[ \forall k \strin \NN\: (\varphi[\vec{x}, f(\vec{x}, k)] \to f(\vec{x},k) \strnin \mathcal{C}) \to \varphi[\vec{x}, y] \to y \strnin \mathcal{C} \right]$. 
 \end{enumerate}
 特に，集合を値域とする弱いSkolem関数が常に取れる：
 \[
 V^{\mathcal{R}} \models \forall X\: \forall Y \: \exists f: \finseq{X} \times \hat{\kappa} \strto Y\; \forall \vec{x} \in \finseq{X} \:\forall y \strin Y \: 
  \left[\varphi[\vec{x}, y] \to \exists \alpha \strin \hat{\kappa} \: \varphi[\vec{x}, f(\vec{x}, \alpha)]\right].
 \]
\end{lemma}
このSkolem関数は強い同値性に関する関数にはなっているが，外延的同値性と両立するとは限らない．
ともあれ，この弱いSkolem関数を使えば，特定の条件下で非外延的な選択関数が定義可能となることがわかる：

\begin{theorem}[Non-extensional Axiom of Choice, $\NEAC$]
 $\kappa \defeq |\mathcal{R}|$とする．この時：
 \[
  V^{\mathcal{R}} \models \hat{\kappa}: \text{整列可能} \implies \uwave{\forall z \: \exists F : \text{写像} \: [ F \sqsubseteq z \land \forall x \: \forall y\: \exists y'\: [(x, y) \in z \to (x, y') \in F] ]}.
 \]
 波下線部の命題を\emph{非外延的選択公理}（$\NEAC$）と呼ぶ．
 特に，$\kappa = \aleph_0$なら無条件に$V^{\mathcal{R}} \models \NEAC$.
\end{theorem}
\begin{proof}
 $V^{\mathcal{R}}$をあたかもモデルであるかのように扱って示そう．
 そこで$<_{\hat{\kappa}}$を$\hat{\kappa}$上の整列順序とする．
 集合$z \in V^{\mathcal{R}}$を任意にとって，$\varphi(z, x, y) \deffml (x, y) \strin z$とおく．
 この時，上の補題~\ref{lem:weak-skolem-gen}の「特に」部分を$\varphi$と$X = \dom(z), Y = \ran(z)$に適用すれば，$f: \dom(z) \times \hat{\kappa} \to \ran(z)$で，
 \[
  V^{\mathcal{R}} \models \forall x \in \dom(z) \: \forall y \in \ran(z) \:[(x,y) \strin z \to \exists \alpha \in \hat{\kappa}\:(x, f(x, \alpha)) \strin z]
 \]
 を満たすものが取れる．そこで，
 \[
  F \defeq \Set{ (x, f(x, \alpha)) | \alpha = \min\nolimits_{<_{\hat{\kappa}}}\Set{ \alpha \strin \hat{\kappa} | (x, f(x, \alpha)) \in z}}
 \]
 により定めれば，これが求めるものである． \qed
\end{proof}

更に，$\ZF_{\varepsilon}+\NEAC$から従属選択公理$\DC$が証明出来る：
\begin{lemma}\label{lem:NEDC-from-NEAC}
 \[
   \ZF_{\varepsilon} + \NEAC \vdash \forall X \: \forall R \: \exists f : \omega \strto X [\forall x \strin X \: \exists y \strin X \: (x,y) \strin R \to \forall n < \omega \: (f(n), f(n+1)) \strin R].
 \]
\end{lemma}
\begin{proof}
 $g \subseteq R$で$g: X \strto X$となっているものを取り，$x_0 \in X$を任意に固定する．
 $f: \omega \to X$を次のように帰納的に定義する：
 \[
  f(0) \defeq x_0, \qquad f(n+1) \defeq g(f(n)).
 \]
 すると，任意の$n < \omega$に対して$(f(n), f(n+1)) \strin R$であり，特に$(f(n), f(n+1)) \in R$． \qed
\end{proof}
\begin{corollary}\label{cor:DC-from-NEAC}
 $\ZF+\NEAC \vdash \DC$.
\end{corollary}
\begin{proof}
 $R$が$\ZF$の意味で極大元を持たない$X$上の二項関係だとする．
 $R^* \defeq \Set{ (x,y) \strin X \times X | (x, y) \in R}$により$R^*$を定めれば，$R^*$は$\ZFe$の意味で極大元を持たない$X$上の二項関係となる．
 そこで上の補題\ref{lem:NEDC-from-NEAC}を使えば，$f: \NN \strto X$で$(f(n), f(n+1)) \strin R^*$を満たすものが取れる．
 補題\ref{lem:nat-func-strong}より$f: \NN \extto X$と見ることができ，$R^*$の定義より$(f(n), f(n+1)) \in R$が成り立つ． \qed
\end{proof}

\begin{corollary}\label{cor:dc-suff-cond}
 $\kappa = |\mathcal{R}|$とおけば，
 $V^{\mathcal{R}} \models \quoted{\hat{\kappa} : \text{整列可能} \implies \DC}$.
 特に$|\mathcal{R}| = \aleph_0$なら$V^{\mathcal{R}} \models \DC$.
\end{corollary}

\subsection{非外延的選択公理の特徴付け}
$\ZF$での通常の議論と同様に，次の議論が成り立つ：
\begin{lemma}
 $\ZFe$上で次は同値：
 \begin{enumerate}
  \item \label{item:NEAC} $\NEAC$,
  \item \label{item:choice-fun} $\forall X \: \exists f: \text{function}\: \forall x \strin X \: [\exists w \: (w \strin x) \to f(x) \strin x]$.
 \end{enumerate}
\end{lemma}
\begin{proof}
 $\ref{item:NEAC} \implies \ref{item:choice-fun}$：収集公理で$z = \Set{(x, z) | z \strin x \strin X}$とおけば，$\NEAC$より関数$f \sqsubseteq z$が取れ，この時$x \strin X$が空でなければ$f(x) \strin x$となる．

 $\ref{item:choice-fun} \implies \ref{item:NEAC}$：$z$が与えられたとし，$I \defeq \dom(z)$とおく（内包公理と収集公理からこれは$\dom(z)$は集合として存在する）．
 $z_i \defeq \Set{(i, x) | (i, x) \strin z, i \strin I}$と定め，$X \defeq \Set{z_i |  i \in I}$とおく．
 この時\ref{item:choice-fun}より関数$g$で各$i \strin I$に対し$g(z_i) \strin z_i$，すなわち$g(z_i) \in z$となるものが取れる．
 そこで$f \defeq \ran(g)$とおけば，これが$\NEAC$が求める$z$の一様化となっている． \qed
\end{proof}

\begin{remark}
 通常の選択公理と同じく，$\NEAC$は次の命題とも同値になるような気がするかもしれない：
 \begin{quote}
  任意の集合$A$と同値関係$\sim$に対して完全代表系$A^*$が存在する．
  即ち$\forall x, y \strin A^* \: [x \sim y \to x = y]$かつ$\forall x \strin A\: \exists y \strin A^* \: x \sim y$なる$A^* \sqsubseteq A$が存在する．
 \end{quote}
 しかし，期待に反してこれは$\ZFe + \NEAC$の公理系だけからは出て来ない．
 通常，これは$x$に対する$\sim$-同値類を$[x]_{\sim}$と書くことにすれば，求める完全代表系$A^*$は$A_0 \defeq \Set{[x]_{\sim} | x \in A}$に対する選択関数の像を取ることで得られる．
 しかし，ここでは「完全性」に暗黙裡に集合の外延的同値性を使っている．
 即ち，$x \sim y$なら$[x] = [y]$となることがこの証明のキモだったが，$\ZFe$の公理系だけから内包公理の与える集合が外延性を満たすことは従わない．
 実際，$V^{\mathcal{R}}$における内包公理を実現する名称の構成法は同値関係についてこうした互換性が成り立たない．
\end{remark}
\end{document}

% Local Variables:
% mode: yatex
% TeX-master: "04-naturals-and-dc.tex"
% End:
